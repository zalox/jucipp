sudo: required

env:
  - distribution=ubuntu
  - distribution=fedora
  - distribution=arch
  - distribution=debian-testing
  - distribution=debian

services:
  - docker

before_script:
  - docker pull "cppit/jucipp:${distribution}"

script:
  - script=compile CXX=clang++ CC=clang ./ci/execute.sh
  - script=clean ./ci/execute.sh
  - script=compile CXX=g++ CC=gcc ./ci/execute.sh
  - script=static_analysis ./ci/execute.sh
  - script=compile test="1" make_command="broadwayd & CTEST_OUTPUT_ON_FAILURE=1 make test" ./ci/execute.sh
